package com.example.proyectoproductivo;

import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.design.widget.BottomNavigationView;
import android.support.v7.app.AppCompatActivity;
import android.view.MenuItem;
import android.widget.EditText;
import android.widget.Toast;

import java.io.File;
import java.text.SimpleDateFormat;
import java.util.Date;

public class ConcepTecnico extends AppCompatActivity {

    EditText Viab, Sosten, Gestor;
    BottomNavigationView btnNV;
    private SharedPreferences sharedPreferences, sharedPreferencesRD, dataEncuesta;
    SharedPreferences.Editor editor, editorRD, editorEncuesta;

    // int TOTAL=0,TOTAL_PS=0,TOTAL_HOGAR=0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_concep_tecnico);
        btnNV = findViewById(R.id.navigationView);
        Gestor = findViewById(R.id.gestor);
        Viab = findViewById(R.id.Viabilidad);
        Sosten = findViewById(R.id.Sostenibilidad);
        sharedPreferences = getSharedPreferences("datos", Context.MODE_PRIVATE);
        dataEncuesta = getSharedPreferences("encuesta", Context.MODE_PRIVATE);
        sharedPreferencesRD = getSharedPreferences("recuperadatos", Context.MODE_PRIVATE);
        editor = sharedPreferences.edit();
        editorRD = sharedPreferencesRD.edit();
        editorEncuesta = sharedPreferences.edit();
        btnNV.getMenu().findItem(R.id.atras).setChecked(true);
        btnNV.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {
            @Override
            public boolean onNavigationItemSelected(@NonNull MenuItem item) {
                int mMenuId = item.getItemId();
                for (int i = 0; i < btnNV.getMenu().size(); i++) {
                    MenuItem menuItem = btnNV.getMenu().getItem(i);
                    boolean isChecked = menuItem.getItemId() == item.getItemId();
                    menuItem.setChecked(isChecked);
                }

                switch (item.getItemId()) {
                    case R.id.atras: {
                        //enviar todos los cvs
                        // ConcepTecnico.super.onBackPressed();
                        Intent intent = new Intent(ConcepTecnico.this, Inversion.class);
                        intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                        // revisar             intent.putExtra("encuestas",sharedPreferences.getString("datosver", ""));
                        startActivity(intent);
                    }
                    break;
                    case R.id.next: {
                        //  SharedPreferences.Editor editor = sharedPreferences.edit();
                        //       editor.clear();editor.commit();

                        if (Viab.getText().toString().matches("") || Sosten.getText().toString().matches("") || Gestor.getText().toString().matches("")) {
                            Toast.makeText(ConcepTecnico.this, "Ha llenado todos los campos?", Toast.LENGTH_SHORT).show();
                        } else {
                            // revisar               editor.putString("CC", editTextCC.getText().toString());
                            //       Toast.makeText(MainActivity.this, ""+nombre.getText().toString(), Toast.LENGTH_SHORT).show();

                            editor.putString("Viab", Viab.getText().toString());

                            editorRD.putString("Viab", Viab.getText().toString());
                            editor.commit();
                            editorRD.commit();
                            editor.putString("Sosten", Sosten.getText().toString());
                            editorRD.putString("Sosten", Sosten.getText().toString());
                            //          if(con2ST.getText().toString().matches("")) {editor.putString("con2ST","");} else{editor.putString("con2ST",con2ST.getText().toString());}
                            //          if(con3ST.getText().toString().matches("")) {editor.putString("con3ST","");}else{editor.putString("con3ST",con3ST.getText().toString());}
                            //            editor.commit();
                            //           editorRD.putString("con1ST",con1ST.getText().toString());
                            //           if(con2ST.getText().toString().matches("")) {editorRD.putString("con2ST","");} else{editorRD.putString("con2ST",con2ST.getText().toString());}
                            //           if(con3ST.getText().toString().matches("")) {editorRD.putString("con3ST","");}else{editorRD.putString("con3ST",con3ST.getText().toString());}
                            editor.commit();
                            editorRD.commit();
                            editor = sharedPreferences.edit();
                            editorEncuesta = dataEncuesta.edit();

                            int TOTAL = Integer.parseInt(sharedPreferences.getString("totalGP", "0")) + Integer.parseInt(sharedPreferences.getString("totalAF", "0")) + Integer.parseInt(sharedPreferences.getString("totalCT", "0")) + Integer.parseInt(sharedPreferences.getString("totalMER", "0")) + Integer.parseInt(sharedPreferences.getString("totalST", "0"));
                            int TOTAL_PS = Integer.parseInt(sharedPreferences.getString("total_psGP", "0")) + Integer.parseInt(sharedPreferences.getString("total_psAF", "0")) + Integer.parseInt(sharedPreferences.getString("total_psCT", "0")) + Integer.parseInt(sharedPreferences.getString("total_psMER", "0")) + Integer.parseInt(sharedPreferences.getString("total_psST", "0"));
                            int TOTAL_HOGAR = Integer.parseInt(sharedPreferences.getString("total_hogarGP", "0")) + Integer.parseInt(sharedPreferences.getString("total_hogarAF", "0")) + Integer.parseInt(sharedPreferences.getString("total_hogarCT", "0")) + Integer.parseInt(sharedPreferences.getString("total_hogarMER", "0")) + Integer.parseInt(sharedPreferences.getString("total_hogarST", "0"));
                            SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yy");
                            String currentDateandTime = sdf.format(new Date());

                            editor.putInt("TOTAL", TOTAL);
                            editor.putInt("TOTAL_PS", TOTAL_PS);
                            editor.putInt("TOTAL_HOGAR", TOTAL_HOGAR);
                            editor.commit();
// editorEncuesta.putString("registros", dataEncuesta.getString("registros","") +" \n" +Gestor.getText().toString()+";"+sharedPreferences.getString("CC", "000000") +";" + sharedPreferences.getString("nombre", "000000") +";" + sharedPreferences.getString("nombre2", "000000") +";" + sharedPreferences.getString("1_apellido", "") +";" + sharedPreferences.getString("2_apellido", "") +";" + sharedPreferences.getString("Departamento", "0") +";" +sharedPreferences.getString("Municipio", "0")+";" +sharedPreferences.getString("Corregimiento", "0") +";"+sharedPreferences.getString("Telefono", "0") +";"+sharedPreferences.getString("Mail", "0") +";"+currentDateandTime+";"+ sharedPreferences.getString("Latitud", "0")+";"+sharedPreferences.getString("Longitud", "")+";"+ sharedPreferences.getString("Altitud", "") +";"+ sharedPreferences.getString("tipoP", "0") +";" +sharedPreferences.getString("tituloP", "0")+";" +sharedPreferences.getString("prodPrinc", "0")+";"+sharedPreferences.getString("codSector", "0")+";"+sharedPreferences.getString("descrSector", "0")+";"+sharedPreferences.getString("codAct", "0")+";"+sharedPreferences.getString("descrAct", "0")+";"+sharedPreferences.getString("descrPP", "0")+";"+sharedPreferences.getString("oportunidades", "0")+";"+sharedPreferences.getString("con1GP", "0")+";"+sharedPreferences.getString("cant1GP", "0")+";"+sharedPreferences.getString("undM1GP", "0")+";"+sharedPreferences.getString("valU1GP", "0")+";"+sharedPreferences.getString("valT1GP", "0")+";"+sharedPreferences.getString("fuentePs1GP", "0")+";"+sharedPreferences.getString("fuenteHogar1GP", "0")+";"+sharedPreferences.getString("con2GP", "0")+";"+sharedPreferences.getString("cant2CT", "0")+";"+sharedPreferences.getString("undM2GP", "0")+";"+sharedPreferences.getString("valU2GP", "0")+";"+sharedPreferences.getString("valT2GP", "0")+";"+sharedPreferences.getString("fuentePs2GP", "0")+";"+sharedPreferences.getString("fuenteHogar2GP", "0")+";"+sharedPreferences.getString("con3GP", "0")+";"+sharedPreferences.getString("cant3GP", "0")+";"+sharedPreferences.getString("undM3GP", "0")+";"+sharedPreferences.getString("valU3GP", "0")+";"+sharedPreferences.getString("valT3GP", "0")+";"+sharedPreferences.getString("fuentePs3GP", "0")+";"+sharedPreferences.getString("fuenteHogar3GP", "0")+";"+sharedPreferences.getString("con4GP", "0")+";"+sharedPreferences.getString("cant4GP", "0")+";"+sharedPreferences.getString("undM4GP", "0")+";"+sharedPreferences.getString("valU4GP", "0")+";"+sharedPreferences.getString("valT4GP", "0")+";"+sharedPreferences.getString("fuentePs4GP", "0")+";"+sharedPreferences.getString("fuenteHogar4GP", "0")+";"+sharedPreferences.getString("con5GP", "0")+";"+sharedPreferences.getString("cant5GP", "0")+";"+sharedPreferences.getString("undM5GP", "0")+";"+sharedPreferences.getString("valU5GP", "0")+";"+sharedPreferences.getString("valT5GP", "0")+";"+sharedPreferences.getString("fuentePs5GP", "0")+";"+sharedPreferences.getString("fuenteHogar5GP", "0")+";"+sharedPreferences.getString("con5_1GP", "0")+";"+sharedPreferences.getString("cant5_1GP", "0")+";"+sharedPreferences.getString("undM5_1GP", "0")+";"+sharedPreferences.getString("valU5_1GP", "0")+";"+sharedPreferences.getString("valT5_1GP", "0")+";"+sharedPreferences.getString("fuentePs5_1GP", "0")+";"+sharedPreferences.getString("fuenteHogar5_1GP", "0")+";"+sharedPreferences.getString("totalGP", "0")+";"+sharedPreferences.getString("total_psGP", "0")+";"+sharedPreferences.getString("total_hogarGP", "0")+";"+sharedPreferences.getString("ver1GP", "0")+";"+sharedPreferences.getString("con1CT", "0")+";"+sharedPreferences.getString("cant1CT", "0")+";"+sharedPreferences.getString("undM1CT", "0")+";"+sharedPreferences.getString("valU1CT", "0")+";"+sharedPreferences.getString("valT1CT", "0")+";"+sharedPreferences.getString("fuentePs1CT", "0")+";"+sharedPreferences.getString("fuenteHogar1CT", "0")+";"+sharedPreferences.getString("con2CT", "0")+";"+sharedPreferences.getString("cant2CT", "0")+";"+sharedPreferences.getString("undM2CT", "0")+";"+sharedPreferences.getString("valU2CT", "0")+";"+sharedPreferences.getString("valT2CT", "0")+";"+sharedPreferences.getString("fuentePs2CT", "0")+";"+sharedPreferences.getString("fuenteHogar2CT", "0")+";"+sharedPreferences.getString("con3CT", "0")+";"+sharedPreferences.getString("cant3CT", "0")+";"+sharedPreferences.getString("undM3CT", "0")+";"+sharedPreferences.getString("valU3CT", "0")+";"+sharedPreferences.getString("valT3CT", "0")+";"+sharedPreferences.getString("fuentePs3CT", "0")+";"+sharedPreferences.getString("fuenteHogar3CT", "0")+";"+sharedPreferences.getString("con4CT", "0")+";"+sharedPreferences.getString("cant4CT", "0")+";"+sharedPreferences.getString("undM4CT", "0")+";"+sharedPreferences.getString("valU4CT", "0")+";"+sharedPreferences.getString("valT4CT", "0")+";"+sharedPreferences.getString("fuentePs4CT", "0")+";"+sharedPreferences.getString("fuenteHogar4CT", "0")+";"+sharedPreferences.getString("con5CT", "0")+";"+sharedPreferences.getString("cant5CT", "0")+";"+sharedPreferences.getString("undM5CT", "0")+";"+sharedPreferences.getString("valU5CT", "0")+";"+sharedPreferences.getString("valT5CT", "0")+";"+sharedPreferences.getString("fuentePs5CT", "0")+";"+sharedPreferences.getString("fuenteHogar5CT", "0")+";"+sharedPreferences.getString("con5_1CT", "0")+";"+sharedPreferences.getString("cant5_1CT", "0")+";"+sharedPreferences.getString("undM5_1CT", "0")+";"+sharedPreferences.getString("valU5_1CT", "0")+";"+sharedPreferences.getString("valT5_1CT", "0")+";"+sharedPreferences.getString("fuentePs5_1CT", "0")+";"+sharedPreferences.getString("fuenteHogar5_1CT", "0")+";"+sharedPreferences.getString("totalCT", "0")+";"+sharedPreferences.getString("total_psCT", "0")+";"+sharedPreferences.getString("total_hogarCT", "0")+";"+sharedPreferences.getString("ver1CT", "0")+";"+sharedPreferences.getString("con1AF", "0")+";"+sharedPreferences.getString("cant1AF", "0")+";"+sharedPreferences.getString("undM1AF", "0")+";"+sharedPreferences.getString("valU1AF", "0")+";"+sharedPreferences.getString("valT1AF", "0")+";"+sharedPreferences.getString("fuentePs1AF", "0")+";"+sharedPreferences.getString("fuenteHogar1AF", "0")+";"+sharedPreferences.getString("con2AF", "0")+";"+sharedPreferences.getString("cant2AF", "0")+";"+sharedPreferences.getString("undM2AF", "0")+";"+sharedPreferences.getString("valU2AF", "0")+";"+sharedPreferences.getString("valT2AF", "0")+";"+sharedPreferences.getString("fuentePs2AF", "0")+";"+sharedPreferences.getString("fuenteHogar2AF", "0")+";"+sharedPreferences.getString("con3AF", "0")+";"+sharedPreferences.getString("cant3AF", "0")+";"+sharedPreferences.getString("undM3AF", "0")+";"+sharedPreferences.getString("valU3AF", "0")+";"+sharedPreferences.getString("valT3AF", "0")+";"+sharedPreferences.getString("fuentePs3AF", "0")+";"+sharedPreferences.getString("fuenteHogar3AF", "0")+";"+sharedPreferences.getString("con4AF", "0")+";"+sharedPreferences.getString("cant4AF", "0")+";"+sharedPreferences.getString("undM4AF", "0")+";"+sharedPreferences.getString("valU4AF", "0")+";"+sharedPreferences.getString("valT4AF", "0")+";"+sharedPreferences.getString("fuentePs4AF", "0")+";"+sharedPreferences.getString("fuenteHogar4AF", "0")+";"+sharedPreferences.getString("con5AF", "0")+";"+sharedPreferences.getString("cant5AF", "0")+";"+sharedPreferences.getString("undM5AF", "0")+";"+sharedPreferences.getString("valU5AF", "0")+";"+sharedPreferences.getString("valT5AF", "0")+";"+sharedPreferences.getString("fuentePs5AF", "0")+";"+sharedPreferences.getString("fuenteHogar5AF", "0")+";"+sharedPreferences.getString("con5_1AF", "0")+";"+sharedPreferences.getString("cant5_1AF", "0")+";"+sharedPreferences.getString("undM5_1AF", "0")+";"+sharedPreferences.getString("valU5_1AF", "0")+";"+sharedPreferences.getString("valT5_1AF", "0")+";"+sharedPreferences.getString("fuentePs5_1AF", "0")+";"+sharedPreferences.getString("fuenteHogar5_1AF", "0")+";"+sharedPreferences.getString("totalAF", "0")+";"+sharedPreferences.getString("total_psAF", "0")+";"+sharedPreferences.getString("total_hogarAF", "0")+";"+sharedPreferences.getString("ver1AF", "0")+";"+sharedPreferences.getString("con1MER", "0")+";"+sharedPreferences.getString("cant1MER", "0")+";"+sharedPreferences.getString("undM1MER", "0")+";"+sharedPreferences.getString("valU1MER", "0")+";"+sharedPreferences.getString("valT1MER", "0")+";"+sharedPreferences.getString("fuentePs1MER", "0")+";"+sharedPreferences.getString("fuenteHogar1MER", "0")+";"+sharedPreferences.getString("con2MER", "0")+";"+sharedPreferences.getString("cant2MER", "0")+";"+sharedPreferences.getString("undM2MER", "0")+";"+sharedPreferences.getString("valU2MER", "0")+";"+sharedPreferences.getString("valT2MER", "0")+";"+sharedPreferences.getString("fuentePs2MER", "0")+";"+sharedPreferences.getString("fuenteHogar2MER", "0")+";"+sharedPreferences.getString("con3MER", "0")+";"+sharedPreferences.getString("cant3MER", "0")+";"+sharedPreferences.getString("undM3MER", "0")+";"+sharedPreferences.getString("valU3MER", "0")+";"+sharedPreferences.getString("valT3MER", "0")+";"+sharedPreferences.getString("fuentePs3MER", "0")+";"+sharedPreferences.getString("fuenteHogar3MER", "0")+";"+sharedPreferences.getString("con4MER", "0")+";"+sharedPreferences.getString("cant4MER", "0")+";"+sharedPreferences.getString("undM4MER", "0")+";"+sharedPreferences.getString("valU4MER", "0")+";"+sharedPreferences.getString("valT4MER", "0")+";"+sharedPreferences.getString("fuentePs4MER", "0")+";"+sharedPreferences.getString("fuenteHogar4MER", "0")+";"+sharedPreferences.getString("con5MER", "0")+";"+sharedPreferences.getString("cant5MER", "0")+";"+sharedPreferences.getString("undM5MER", "0")+";"+sharedPreferences.getString("valU5MER", "0")+";"+sharedPreferences.getString("valT5MER", "0")+";"+sharedPreferences.getString("fuentePs5MER", "0")+";"+sharedPreferences.getString("fuenteHogar5MER", "0")+";"+sharedPreferences.getString("con5_1MER", "0")+";"+sharedPreferences.getString("cant5_1MER", "0")+";"+sharedPreferences.getString("undM5_1MER", "0")+";"+sharedPreferences.getString("valU5_1MER", "0")+";"+sharedPreferences.getString("valT5_1MER", "0")+";"+sharedPreferences.getString("fuentePs5_1MER", "0")+";"+sharedPreferences.getString("fuenteHogar5_1MER", "0")+";"+sharedPreferences.getString("totalMER", "0")+";"+sharedPreferences.getString("total_psMER", "0")+";"+sharedPreferences.getString("total_hogarMER", "0")+";"+sharedPreferences.getString("ver1MER", "0")+";"+sharedPreferences.getString("con1ST", "0")+";"+sharedPreferences.getString("cant1ST", "0")+";"+sharedPreferences.getString("undM1ST", "0")+";"+sharedPreferences.getString("valU1ST", "0")+";"+sharedPreferences.getString("valT1ST", "0")+";"+sharedPreferences.getString("fuentePs1ST", "0")+";"+sharedPreferences.getString("fuenteHogar1ST", "0")+";"+sharedPreferences.getString("con2ST", "0")+";"+sharedPreferences.getString("cant2ST", "0")+";"+sharedPreferences.getString("undM2ST", "0")+";"+sharedPreferences.getString("valU2ST", "0")+";"+sharedPreferences.getString("valT2ST", "0")+";"+sharedPreferences.getString("fuentePs2ST", "0")+";"+sharedPreferences.getString("fuenteHogar2ST", "0")+";"+sharedPreferences.getString("con3ST", "0")+";"+sharedPreferences.getString("cant3ST", "0")+";"+sharedPreferences.getString("undM3ST", "0")+";"+sharedPreferences.getString("valU3ST", "0")+";"+sharedPreferences.getString("valT3ST", "0")+";"+sharedPreferences.getString("fuentePs3ST", "0")+";"+sharedPreferences.getString("fuenteHogar3ST", "0")+";"+sharedPreferences.getString("con4ST", "0")+";"+sharedPreferences.getString("cant4ST", "0")+";"+sharedPreferences.getString("undM4ST", "0")+";"+sharedPreferences.getString("valU4ST", "0")+";"+sharedPreferences.getString("valT4ST", "0")+";"+sharedPreferences.getString("fuentePs4ST", "0")+";"+sharedPreferences.getString("fuenteHogar4ST", "0")+";"+sharedPreferences.getString("con5ST", "0")+";"+sharedPreferences.getString("cant5ST", "0")+";"+sharedPreferences.getString("undM5ST", "0")+";"+sharedPreferences.getString("valU5ST", "0")+";"+sharedPreferences.getString("valT5ST", "0")+";"+sharedPreferences.getString("fuentePs5ST", "0")+";"+sharedPreferences.getString("fuenteHogar5ST", "0")+";"+sharedPreferences.getString("con5_1ST", "0")+";"+sharedPreferences.getString("cant5_1ST", "0")+";"+sharedPreferences.getString("undM5_1ST", "0")+";"+sharedPreferences.getString("valU5_1ST", "0")+";"+sharedPreferences.getString("valT5_1ST", "0")+";"+sharedPreferences.getString("fuentePs5_1ST", "0")+";"+sharedPreferences.getString("fuenteHogar5_1ST", "0")+";"+sharedPreferences.getString("totalST", "0")+";"+sharedPreferences.getString("total_psST", "0")+";"+sharedPreferences.getString("total_hogarST", "0")+";"+sharedPreferences.getString("ver1ST", "0")+";"+sharedPreferences.getString("Viab", "0")+";"+sharedPreferences.getString("Sosten", "0")+";"+sharedPreferences.getInt("TOTAL",0)+";"+sharedPreferences.getInt("TOTAL_PS",0)+";"+sharedPreferences.getInt("TOTAL_HOGAR",0));
                            editorEncuesta.putString("registros", dataEncuesta.getString("registros", "") + Gestor.getText().toString() + ";" + sharedPreferences.getString("CC", "000000") + ";" + sharedPreferences.getString("nombre", "000000") + ";" + sharedPreferences.getString("nombre2", "000000") + ";" + sharedPreferences.getString("1_apellido", "") + ";" + sharedPreferences.getString("2_apellido", "") + ";" + sharedPreferences.getString("Departamento", "0") + ";" + sharedPreferences.getString("Municipio", "0") + ";" + sharedPreferences.getString("Corregimiento", "0") + ";" + sharedPreferences.getString("Telefono", "0") + ";" + sharedPreferences.getString("Mail", "0") + ";" + currentDateandTime + ";" + sharedPreferences.getString("Latitud", "0") + ";" + sharedPreferences.getString("Longitud", "") + ";" + sharedPreferences.getString("Altitud", "") + ";" + sharedPreferences.getString("tipoP", "0") + ";" + sharedPreferences.getString("tituloP", "0") + ";" + sharedPreferences.getString("prodPrinc", "0") + ";" + sharedPreferences.getString("codSector", "0") + ";" + sharedPreferences.getString("descrSector", "0") + ";" + sharedPreferences.getString("codAct", "0") + ";" + sharedPreferences.getString("descrAct", "0") + ";" + sharedPreferences.getString("descrPP", "0") + ";" + sharedPreferences.getString("oportunidades", "0") + ";" + sharedPreferences.getString("con1GP", "0") + ";" + sharedPreferences.getString("cant1GP", "0") + ";" + sharedPreferences.getString("undM1GP", "0") + ";" + sharedPreferences.getString("valU1GP", "0") + ";" + sharedPreferences.getString("valT1GP", "0") + ";" + sharedPreferences.getString("fuentePs1GP", "0") + ";" + sharedPreferences.getString("fuenteHogar1GP", "0") + ";" + sharedPreferences.getString("con2GP", "0") + ";" + sharedPreferences.getString("cant2CT", "0") + ";" + sharedPreferences.getString("undM2GP", "0") + ";" + sharedPreferences.getString("valU2GP", "0") + ";" + sharedPreferences.getString("valT2GP", "0") + ";" + sharedPreferences.getString("fuentePs2GP", "0") + ";" + sharedPreferences.getString("fuenteHogar2GP", "0") + ";" + sharedPreferences.getString("con3GP", "0") + ";" + sharedPreferences.getString("cant3GP", "0") + ";" + sharedPreferences.getString("undM3GP", "0") + ";" + sharedPreferences.getString("valU3GP", "0") + ";" + sharedPreferences.getString("valT3GP", "0") + ";" + sharedPreferences.getString("fuentePs3GP", "0") + ";" + sharedPreferences.getString("fuenteHogar3GP", "0") + ";" + sharedPreferences.getString("con4GP", "0") + ";" + sharedPreferences.getString("cant4GP", "0") + ";" + sharedPreferences.getString("undM4GP", "0") + ";" + sharedPreferences.getString("valU4GP", "0") + ";" + sharedPreferences.getString("valT4GP", "0") + ";" + sharedPreferences.getString("fuentePs4GP", "0") + ";" + sharedPreferences.getString("fuenteHogar4GP", "0") + ";" + sharedPreferences.getString("con5GP", "0") + ";" + sharedPreferences.getString("cant5GP", "0") + ";" + sharedPreferences.getString("undM5GP", "0") + ";" + sharedPreferences.getString("valU5GP", "0") + ";" + sharedPreferences.getString("valT5GP", "0") + ";" + sharedPreferences.getString("fuentePs5GP", "0") + ";" + sharedPreferences.getString("fuenteHogar5GP", "0") + ";" + sharedPreferences.getString("con5_1GP", "0") + ";" + sharedPreferences.getString("cant5_1GP", "0") + ";" + sharedPreferences.getString("undM5_1GP", "0") + ";" + sharedPreferences.getString("valU5_1GP", "0") + ";" + sharedPreferences.getString("valT5_1GP", "0") + ";" + sharedPreferences.getString("fuentePs5_1GP", "0") + ";" + sharedPreferences.getString("fuenteHogar5_1GP", "0") + ";" + sharedPreferences.getString("totalGP", "0") + ";" + sharedPreferences.getString("total_psGP", "0") + ";" + sharedPreferences.getString("total_hogarGP", "0") + ";" + sharedPreferences.getString("ver1GP", "0") + ";" + sharedPreferences.getString("con1CT", "0") + ";" + sharedPreferences.getString("cant1CT", "0") + ";" + sharedPreferences.getString("undM1CT", "0") + ";" + sharedPreferences.getString("valU1CT", "0") + ";" + sharedPreferences.getString("valT1CT", "0") + ";" + sharedPreferences.getString("fuentePs1CT", "0") + ";" + sharedPreferences.getString("fuenteHogar1CT", "0") + ";" + sharedPreferences.getString("con2CT", "0") + ";" + sharedPreferences.getString("cant2CT", "0") + ";" + sharedPreferences.getString("undM2CT", "0") + ";" + sharedPreferences.getString("valU2CT", "0") + ";" + sharedPreferences.getString("valT2CT", "0") + ";" + sharedPreferences.getString("fuentePs2CT", "0") + ";" + sharedPreferences.getString("fuenteHogar2CT", "0") + ";" + sharedPreferences.getString("con3CT", "0") + ";" + sharedPreferences.getString("cant3CT", "0") + ";" + sharedPreferences.getString("undM3CT", "0") + ";" + sharedPreferences.getString("valU3CT", "0") + ";" + sharedPreferences.getString("valT3CT", "0") + ";" + sharedPreferences.getString("fuentePs3CT", "0") + ";" + sharedPreferences.getString("fuenteHogar3CT", "0") + ";" + sharedPreferences.getString("con4CT", "0") + ";" + sharedPreferences.getString("cant4CT", "0") + ";" + sharedPreferences.getString("undM4CT", "0") + ";" + sharedPreferences.getString("valU4CT", "0") + ";" + sharedPreferences.getString("valT4CT", "0") + ";" + sharedPreferences.getString("fuentePs4CT", "0") + ";" + sharedPreferences.getString("fuenteHogar4CT", "0") + ";" + sharedPreferences.getString("con5CT", "0") + ";" + sharedPreferences.getString("cant5CT", "0") + ";" + sharedPreferences.getString("undM5CT", "0") + ";" + sharedPreferences.getString("valU5CT", "0") + ";" + sharedPreferences.getString("valT5CT", "0") + ";" + sharedPreferences.getString("fuentePs5CT", "0") + ";" + sharedPreferences.getString("fuenteHogar5CT", "0") + ";" + sharedPreferences.getString("con5_1CT", "0") + ";" + sharedPreferences.getString("cant5_1CT", "0") + ";" + sharedPreferences.getString("undM5_1CT", "0") + ";" + sharedPreferences.getString("valU5_1CT", "0") + ";" + sharedPreferences.getString("valT5_1CT", "0") + ";" + sharedPreferences.getString("fuentePs5_1CT", "0") + ";" + sharedPreferences.getString("fuenteHogar5_1CT", "0") + ";" + sharedPreferences.getString("totalCT", "0") + ";" + sharedPreferences.getString("total_psCT", "0") + ";" + sharedPreferences.getString("total_hogarCT", "0") + ";" + sharedPreferences.getString("ver1CT", "0") + ";" + sharedPreferences.getString("con1AF", "0") + ";" + sharedPreferences.getString("cant1AF", "0") + ";" + sharedPreferences.getString("undM1AF", "0") + ";" + sharedPreferences.getString("valU1AF", "0") + ";" + sharedPreferences.getString("valT1AF", "0") + ";" + sharedPreferences.getString("fuentePs1AF", "0") + ";" + sharedPreferences.getString("fuenteHogar1AF", "0") + ";" + sharedPreferences.getString("con2AF", "0") + ";" + sharedPreferences.getString("cant2AF", "0") + ";" + sharedPreferences.getString("undM2AF", "0") + ";" + sharedPreferences.getString("valU2AF", "0") + ";" + sharedPreferences.getString("valT2AF", "0") + ";" + sharedPreferences.getString("fuentePs2AF", "0") + ";" + sharedPreferences.getString("fuenteHogar2AF", "0") + ";" + sharedPreferences.getString("con3AF", "0") + ";" + sharedPreferences.getString("cant3AF", "0") + ";" + sharedPreferences.getString("undM3AF", "0") + ";" + sharedPreferences.getString("valU3AF", "0") + ";" + sharedPreferences.getString("valT3AF", "0") + ";" + sharedPreferences.getString("fuentePs3AF", "0") + ";" + sharedPreferences.getString("fuenteHogar3AF", "0") + ";" + sharedPreferences.getString("con4AF", "0") + ";" + sharedPreferences.getString("cant4AF", "0") + ";" + sharedPreferences.getString("undM4AF", "0") + ";" + sharedPreferences.getString("valU4AF", "0") + ";" + sharedPreferences.getString("valT4AF", "0") + ";" + sharedPreferences.getString("fuentePs4AF", "0") + ";" + sharedPreferences.getString("fuenteHogar4AF", "0") + ";" + sharedPreferences.getString("con5AF", "0") + ";" + sharedPreferences.getString("cant5AF", "0") + ";" + sharedPreferences.getString("undM5AF", "0") + ";" + sharedPreferences.getString("valU5AF", "0") + ";" + sharedPreferences.getString("valT5AF", "0") + ";" + sharedPreferences.getString("fuentePs5AF", "0") + ";" + sharedPreferences.getString("fuenteHogar5AF", "0") + ";" + sharedPreferences.getString("con5_1AF", "0") + ";" + sharedPreferences.getString("cant5_1AF", "0") + ";" + sharedPreferences.getString("undM5_1AF", "0") + ";" + sharedPreferences.getString("valU5_1AF", "0") + ";" + sharedPreferences.getString("valT5_1AF", "0") + ";" + sharedPreferences.getString("fuentePs5_1AF", "0") + ";" + sharedPreferences.getString("fuenteHogar5_1AF", "0") + ";" + sharedPreferences.getString("totalAF", "0") + ";" + sharedPreferences.getString("total_psAF", "0") + ";" + sharedPreferences.getString("total_hogarAF", "0") + ";" + sharedPreferences.getString("ver1AF", "0") + ";" + sharedPreferences.getString("con1MER", "0") + ";" + sharedPreferences.getString("cant1MER", "0") + ";" + sharedPreferences.getString("undM1MER", "0") + ";" + sharedPreferences.getString("valU1MER", "0") + ";" + sharedPreferences.getString("valT1MER", "0") + ";" + sharedPreferences.getString("fuentePs1MER", "0") + ";" + sharedPreferences.getString("fuenteHogar1MER", "0") + ";" + sharedPreferences.getString("con2MER", "0") + ";" + sharedPreferences.getString("cant2MER", "0") + ";" + sharedPreferences.getString("undM2MER", "0") + ";" + sharedPreferences.getString("valU2MER", "0") + ";" + sharedPreferences.getString("valT2MER", "0") + ";" + sharedPreferences.getString("fuentePs2MER", "0") + ";" + sharedPreferences.getString("fuenteHogar2MER", "0") + ";" + sharedPreferences.getString("con3MER", "0") + ";" + sharedPreferences.getString("cant3MER", "0") + ";" + sharedPreferences.getString("undM3MER", "0") + ";" + sharedPreferences.getString("valU3MER", "0") + ";" + sharedPreferences.getString("valT3MER", "0") + ";" + sharedPreferences.getString("fuentePs3MER", "0") + ";" + sharedPreferences.getString("fuenteHogar3MER", "0") + ";" + sharedPreferences.getString("con4MER", "0") + ";" + sharedPreferences.getString("cant4MER", "0") + ";" + sharedPreferences.getString("undM4MER", "0") + ";" + sharedPreferences.getString("valU4MER", "0") + ";" + sharedPreferences.getString("valT4MER", "0") + ";" + sharedPreferences.getString("fuentePs4MER", "0") + ";" + sharedPreferences.getString("fuenteHogar4MER", "0") + ";" + sharedPreferences.getString("con5MER", "0") + ";" + sharedPreferences.getString("cant5MER", "0") + ";" + sharedPreferences.getString("undM5MER", "0") + ";" + sharedPreferences.getString("valU5MER", "0") + ";" + sharedPreferences.getString("valT5MER", "0") + ";" + sharedPreferences.getString("fuentePs5MER", "0") + ";" + sharedPreferences.getString("fuenteHogar5MER", "0") + ";" + sharedPreferences.getString("con5_1MER", "0") + ";" + sharedPreferences.getString("cant5_1MER", "0") + ";" + sharedPreferences.getString("undM5_1MER", "0") + ";" + sharedPreferences.getString("valU5_1MER", "0") + ";" + sharedPreferences.getString("valT5_1MER", "0") + ";" + sharedPreferences.getString("fuentePs5_1MER", "0") + ";" + sharedPreferences.getString("fuenteHogar5_1MER", "0") + ";" + sharedPreferences.getString("totalMER", "0") + ";" + sharedPreferences.getString("total_psMER", "0") + ";" + sharedPreferences.getString("total_hogarMER", "0") + ";" + sharedPreferences.getString("ver1MER", "0") + ";" + sharedPreferences.getString("con1ST", "0") + ";" + sharedPreferences.getString("cant1ST", "0") + ";" + sharedPreferences.getString("undM1ST", "0") + ";" + sharedPreferences.getString("valU1ST", "0") + ";" + sharedPreferences.getString("valT1ST", "0") + ";" + sharedPreferences.getString("fuentePs1ST", "0") + ";" + sharedPreferences.getString("fuenteHogar1ST", "0") + ";" + sharedPreferences.getString("con2ST", "0") + ";" + sharedPreferences.getString("cant2ST", "0") + ";" + sharedPreferences.getString("undM2ST", "0") + ";" + sharedPreferences.getString("valU2ST", "0") + ";" + sharedPreferences.getString("valT2ST", "0") + ";" + sharedPreferences.getString("fuentePs2ST", "0") + ";" + sharedPreferences.getString("fuenteHogar2ST", "0") + ";" + sharedPreferences.getString("con3ST", "0") + ";" + sharedPreferences.getString("cant3ST", "0") + ";" + sharedPreferences.getString("undM3ST", "0") + ";" + sharedPreferences.getString("valU3ST", "0") + ";" + sharedPreferences.getString("valT3ST", "0") + ";" + sharedPreferences.getString("fuentePs3ST", "0") + ";" + sharedPreferences.getString("fuenteHogar3ST", "0") + ";" + sharedPreferences.getString("con4ST", "0") + ";" + sharedPreferences.getString("cant4ST", "0") + ";" + sharedPreferences.getString("undM4ST", "0") + ";" + sharedPreferences.getString("valU4ST", "0") + ";" + sharedPreferences.getString("valT4ST", "0") + ";" + sharedPreferences.getString("fuentePs4ST", "0") + ";" + sharedPreferences.getString("fuenteHogar4ST", "0") + ";" + sharedPreferences.getString("con5ST", "0") + ";" + sharedPreferences.getString("cant5ST", "0") + ";" + sharedPreferences.getString("undM5ST", "0") + ";" + sharedPreferences.getString("valU5ST", "0") + ";" + sharedPreferences.getString("valT5ST", "0") + ";" + sharedPreferences.getString("fuentePs5ST", "0") + ";" + sharedPreferences.getString("fuenteHogar5ST", "0") + ";" + sharedPreferences.getString("con5_1ST", "0") + ";" + sharedPreferences.getString("cant5_1ST", "0") + ";" + sharedPreferences.getString("undM5_1ST", "0") + ";" + sharedPreferences.getString("valU5_1ST", "0") + ";" + sharedPreferences.getString("valT5_1ST", "0") + ";" + sharedPreferences.getString("fuentePs5_1ST", "0") + ";" + sharedPreferences.getString("fuenteHogar5_1ST", "0") + ";" + sharedPreferences.getString("totalST", "0") + ";" + sharedPreferences.getString("total_psST", "0") + ";" + sharedPreferences.getString("total_hogarST", "0") + ";" + sharedPreferences.getString("ver1ST", "0") + ";" + sharedPreferences.getString("Viab", "0") + ";" + sharedPreferences.getString("Sosten", "0") + ";" + sharedPreferences.getInt("TOTAL", 0) + ";" + sharedPreferences.getInt("TOTAL_PS", 0) + ";" + sharedPreferences.getInt("TOTAL_HOGAR", 0) + " \n");
                            editorEncuesta.putString("datosver", dataEncuesta.getString("datosver", "") + " \n" + sharedPreferences.getString("CC", "000000") + ":" + sharedPreferences.getString("nombre", "000000") + " " + sharedPreferences.getString("nombre2", "000000") + " " + sharedPreferences.getString("1_apellido", ""));
                            editorEncuesta.commit();

/*
                            String baseFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)+"";
                            deleteRecursive(new File(baseFolder,"datosPP.csv"));

                            try {
                                FileWriter writer = new FileWriter(new File(baseFolder,"datosPP.csv"), true);

                                writer.write(sharedPreferences.getString("registros",""));
                                writer.flush();
                                writer.close();
                                Intent mailIntent = new Intent(Intent.ACTION_SEND);
                                mailIntent.setType("text/csv");


                                ///crear CSV
                                String nPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)+"";
                                //deleteRecursive(new File(nPath,"datosVMC.csv"));
                                Uri uri = FileProvider.getUriForFile(ConcepTecnico.this,"com.example.proyectoproductivo",new File(nPath,"datosPP.csv"));
                                mailIntent.addFlags(Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION);
                                mailIntent.putExtra(Intent.EXTRA_STREAM,uri);
                                startActivity(Intent.createChooser(mailIntent, "Enviando Archivo."));
                                Log.d("nPath",nPath);


                                return true;
                            } catch (IOException e) {
                                alertMensaje("Error","Error al crear el archivo CSV");
                                return false;
                            }
*/

                            Intent intent = new Intent(ConcepTecnico.this, GuardarTodo.class);
                            startActivity(intent);
                        }

                    }
                    break;

                }
                return true;

            }
        });
        loadData();
    }

    private void loadData() {
        if (!(sharedPreferencesRD.getString("Viab", "").isEmpty() && sharedPreferencesRD.getString("Sosten", "").isEmpty())) {

            String viab = sharedPreferencesRD.getString("Viab", "");
            Viab.setText(viab);

            String sosten = sharedPreferencesRD.getString("Sosten", "");
            Sosten.setText(sosten);
        }
    }

    private void alertMensaje(String title, String body) {
        android.support.v7.app.AlertDialog.Builder builder = new android.support.v7.app.AlertDialog.Builder(ConcepTecnico.this);
        builder.setTitle(title);
        builder.setMessage(body);
        builder.setPositiveButton("Aceptar", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        final android.support.v7.app.AlertDialog dialog = builder.create();
        dialog.show();
    }

    public static void deleteRecursive(File fileOrDirectory) {
        if (fileOrDirectory.isDirectory())
            for (File child : fileOrDirectory.listFiles())
                deleteRecursive(child);
        fileOrDirectory.delete();
    }


}
